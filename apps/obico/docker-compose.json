{
  "schemaVersion": 2,
  "services": [
    {
      "name": "obico-ml-api",
      "image": "ghcr.io/gabe565/obico/ml-api:latest",
      "isMain": true,
      "internalPort": 3333,
      "command": [
        "bash",
        "-c",
        "gunicorn --bind 0.0.0.0:$PORT --workers 1 wsgi"
      ],
      "environment": [
        {
          "key": "PORT",
          "value": "3333"
        },
        {
          "key": "DEBUG",
          "value": "True"
        },
        {
          "key": "FLASK_APP",
          "value": "server.py"
        },
        {
          "key": "CUDA_VISIBLE_DEVICES",
          "value": ""
        }
      ],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data",
          "containerPath": "/app/data"
        }
      ]
    }
  ]
}

