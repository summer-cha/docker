# Wyze MJPEG Proxy

å°† RTSP è§†é¢‘æµè½¬æ¢ä¸º MJPEG æ ¼å¼ï¼Œå¯ç›´æŽ¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹æ‘„åƒå¤´ç”»é¢ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- RTSP è½¬ MJPEG è½¬æ¢
- æ”¯æŒå¤šæ‘„åƒå¤´åŒæ—¶è½¬æ¢
- å¯è°ƒèŠ‚åˆ†è¾¨çŽ‡ã€è´¨é‡ã€å¸§çŽ‡
- è½»é‡çº§ï¼Œèµ„æºå ç”¨å°‘

## å¿«é€Ÿå¼€å§‹

å®‰è£…æ—¶åœ¨ç•Œé¢å¡«å†™é…ç½®å‚æ•°ï¼š
- **æ‘„åƒå¤´åç§°**: `printer-cam` ï¼ˆé»˜è®¤ï¼‰
- **RTSP åœ°å€**: `rtsp://ç”¨æˆ·å:å¯†ç @IP:ç«¯å£/è·¯å¾„`
- **åˆ†è¾¨çŽ‡**: `1280x720` æˆ– `1920x1080`
- **è´¨é‡**: 1-100ï¼ŒæŽ¨è 60-80
- **å¸§çŽ‡**: 1-30ï¼ŒæŽ¨è 3-5

å®‰è£…å®ŒæˆåŽï¼Œç‚¹å‡»"æ‰“å¼€"æŒ‰é’®å³å¯æŸ¥çœ‹è§†é¢‘æµã€‚

---

## å¤šæ‘„åƒå¤´é…ç½®

### User Config é…ç½®æ–¹æ³• âœ… å·²æµ‹è¯•

#### æ“ä½œæ­¥éª¤

1. å…ˆæŒ‰å•æ‘„åƒå¤´æ–¹å¼å®‰è£…åº”ç”¨
2. å®‰è£…å®ŒæˆåŽï¼Œè¿›å…¥åº”ç”¨è¯¦æƒ…é¡µ
3. ç‚¹å‡» **"User config"** æ ‡ç­¾
4. å¯ç”¨ **"Enable user config"** å¼€å…³
5. é€‰æ‹© **"docker-compose.yml"** æ ‡ç­¾
6. ç²˜è´´ä¸‹é¢å¯¹åº”çš„é…ç½®
7. ç‚¹å‡» **"Save"** ä¿å­˜
8. åœæ­¢åº”ç”¨ï¼Œç„¶åŽé‡æ–°å¯åŠ¨ä½¿é…ç½®ç”Ÿæ•ˆ

---

#### åŒæ‘„åƒå¤´é…ç½®ï¼ˆæµ‹è¯•é€šè¿‡ âœ…ï¼‰

```yaml
services:
  config-generator:
    command:
      - sh
      - -c
      - |
        cat > /shared/config.yaml << 'EOF'
        verbosity: 0
        port: 8190
        streams:
          - name: printer-cam
            source: rtsp://admin:password@192.168.1.16:554/h264/ch0/main/av_stream
            resolution: 1280x720
            quality: 60
            framerate: 3
          - name: door-cam
            source: rtsp://admin:password@192.168.1.17:554/stream
            resolution: 1920x1080
            quality: 80
            framerate: 5
        EOF
        cat /shared/config.yaml
        sleep infinity
```

**è®¿é—®åœ°å€ï¼š**
- æ‰“å°æœºæ‘„åƒå¤´: `http://æœåŠ¡å™¨IP:8190/printer-cam/stream.mjpg`
- é—¨å£æ‘„åƒå¤´: `http://æœåŠ¡å™¨IP:8190/door-cam/stream.mjpg`
- é¦–é¡µåˆ—è¡¨: `http://æœåŠ¡å™¨IP:8190/`

**å‚æ•°è¯´æ˜Žï¼š**
- `name`: æ‘„åƒå¤´åç§°ï¼ˆç”¨äºŽ URLï¼‰
- `source`: æ›¿æ¢ä¸ºä½ çš„ RTSP åœ°å€
- `resolution`: åˆ†è¾¨çŽ‡ï¼ˆå¦‚ 640x480, 1280x720, 1920x1080ï¼‰
- `quality`: JPEG è´¨é‡ 1-100
- `framerate`: å¸§çŽ‡ 1-30

**æ·»åŠ æ›´å¤šæ‘„åƒå¤´ï¼š** åªéœ€åœ¨ `streams:` ä¸‹ç»§ç»­æ·»åŠ  `- name:` å—å³å¯ï¼

---

## ä¿®æ”¹é…ç½®

### ä¿®æ”¹å•æ‘„åƒå¤´é…ç½®
1. è¿›å…¥åº”ç”¨è®¾ç½®æ ‡ç­¾
2. ä¿®æ”¹å‚æ•°
3. ä¿å­˜å¹¶é‡å¯åº”ç”¨

### ä¿®æ”¹å¤šæ‘„åƒå¤´é…ç½®
1. è¿›å…¥ User config æ ‡ç­¾
2. ç¼–è¾‘ docker-compose.yml ä¸­çš„ streams éƒ¨åˆ†
3. æ·»åŠ /åˆ é™¤/ä¿®æ”¹æ‘„åƒå¤´é…ç½®
4. ä¿å­˜å¹¶é‡å¯åº”ç”¨

---

## æ³¨æ„äº‹é¡¹

âš ï¸ **User Config è­¦å‘Š**ï¼šç¼–è¾‘ User Config æ—¶è¯·å°å¿ƒï¼Œé…ç½®é”™è¯¯å¯èƒ½å¯¼è‡´åº”ç”¨æ— æ³•å¯åŠ¨ã€‚å»ºè®®å…ˆå¤‡ä»½é…ç½®ã€‚

ðŸ’¡ **æ€§èƒ½æç¤º**ï¼š
- å¤šæ‘„åƒå¤´ä¼šå¢žåŠ  CPU å ç”¨
- é™ä½Žå¸§çŽ‡å’Œè´¨é‡å¯å‡å°‘èµ„æºæ¶ˆè€—
- å»ºè®®åŒæ—¶è½¬æ¢ä¸è¶…è¿‡ 5 ä¸ªæ‘„åƒå¤´

## å¸¸è§æ‘„åƒå¤´ RTSP åœ°å€

**æµ·åº·å¨è§†:**
```
rtsp://admin:password@192.168.1.x:554/h264/ch0/main/av_stream
```

**å¤§åŽ:**
```
rtsp://admin:password@192.168.1.x:554/cam/realmonitor?channel=1&subtype=0
```

**TP-Link/Tapo:**
```
rtsp://username:password@192.168.1.x:554/stream1
```

## æ€§èƒ½å»ºè®®

| åœºæ™¯ | åˆ†è¾¨çŽ‡ | è´¨é‡ | å¸§çŽ‡ |
|------|--------|------|------|
| ä½Žå¸¦å®½ | 640x480 | 40-50 | 2-3 |
| å¹³è¡¡ï¼ˆæŽ¨èï¼‰ | 1280x720 | 60-70 | 3-5 |
| é«˜è´¨é‡ | 1920x1080 | 80-90 | 5-10 |
