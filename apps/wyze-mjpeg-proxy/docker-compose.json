{
  "schemaVersion": 2,
  "services": [
    {
      "name": "wyze-mjpeg-proxy",
      "image": "kamermans/wyze-mjpeg-proxy:latest",
      "isMain": true,
      "internalPort": 8190,
      "command": [
        "sh",
        "-c",
        "printf 'verbosity: 0\\nport: 8190\\nstreams:\\n  - name: %s\\n    source: %s\\n    resolution: %s\\n    quality: %s\\n    framerate: %s\\n' \"$CAMERA_NAME\" \"$RTSP_SOURCE\" \"$RESOLUTION\" \"$QUALITY\" \"$FRAMERATE\" > /config.yaml && echo 'Configuration generated:' && cat /config.yaml && exec wyze-mjpeg-proxy /config.yaml"
      ],
      "environment": [
        {
          "key": "CAMERA_NAME",
          "value": "${CAMERA_NAME}"
        },
        {
          "key": "RTSP_SOURCE",
          "value": "${RTSP_SOURCE}"
        },
        {
          "key": "RESOLUTION",
          "value": "${RESOLUTION}"
        },
        {
          "key": "QUALITY",
          "value": "${QUALITY}"
        },
        {
          "key": "FRAMERATE",
          "value": "${FRAMERATE}"
        }
      ]
    }
  ]
}
